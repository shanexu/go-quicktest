package main

import (
	"bytes"
	"encoding/binary"
	"encoding/hex"
	"fmt"
	"os"
)

func main() {
	hexText := "0053010000010400002b0000000031303033e2978ee2978e43617074636861466f72436c69656e74e2978e362e362e312e34e2978e313030303030303132353637333832313132e2978e32e2978e7b2243616c6c6261636b223a22222c224374786964223a223765346666313138386633666232393731306530336363303834316265376136222c224465766963654944223a226231346138363235663030373061643839316532323464646531383632316230222c2252657175657374223a226f77475232427a72653236746e79557351487558346f6b696331685243644c396b52724870554d6e68722532427037505a713961253242647277435a66586c314c79426a347a4c546f4336414c4b253044253041395276465a71634e426f476d32486542765154494c577079634d53346c394876704463764f41455435637443526f7a3641717239645a253044253041227d"
	data, _ := hex.DecodeString(hexText)
	fmt.Println(len(data))
	r := bytes.NewReader(data)
	r.Seek(1, 0)
	var size uint32
	binary.Read(r, binary.LittleEndian, &size)
	fmt.Println(size)
	os.WriteFile("/tmp/message.bin", data, 0644)

	hexText = "01000000b83e00000000010000512700"
	data, _ = hex.DecodeString(hexText)
	fmt.Println(len(data))
	r = bytes.NewReader(data)
	binary.Read(r, binary.LittleEndian, &size)
	fmt.Println(size)
}
